<xf:macro name="snippet"
		  arg-user="!"
		  arg-message="!"
		  arg-type="!"
		  arg-context="!"
		  >
	<xf:set var="$trimLength" value="{{ $user.getSvWatchedThreadEmailTrimLength($context) }}" />
	<xf:if is="$trimLength < 0">
		<div class="message">{{ bb_code_type('emailHtml', $message, $type, $context) }}</div>
	<xf:elseif is="$trimLength > 0" />
		<div class="message">{{ bb_code_type('emailHtml', snippet($message, $trimLength), $type, $context) }}</div>
	</xf:if>
</xf:macro>